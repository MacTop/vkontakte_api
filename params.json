{"name":"vkontakte_api","body":"## Что это?\r\n`vkontakte_api` - ruby-обертка для ВКонтакте API. Она позволяет вызывать методы API и получать их результаты в виде `Hash` и `Array`.\r\n\r\nМетоды из пространств имен (например, `friends.get`) реализованы в виде цепных вызовов, например `app.friends.get(fields: ['last_name', 'first_name'])`.\r\n\r\n## Как этим пользоваться?\r\nМожно использовать `vkontakte_api` как для авторизованных запросов (требующих авторизованного пользователя, типа `friends.get` или `groups.get` без параметра `uid`), так и для неавторизованных (типа `users.get`).\r\n\r\n### Неавторизованные запросы\r\n\r\nЕсли все, что нужно получить от вконтакта - это публично доступные данные, можно пойти по простому пути:\r\n\r\n``` ruby\r\nrequire 'vkontakte_api'\r\n@app = VkontakteApi::Client.new\r\n@app.users.get(uid: 1)\r\n# => [\r\n#     [0] {\r\n#                :uid => 1,\r\n#         :first_name => \"Павел\",\r\n#          :last_name => \"Дуров\"\r\n#     }\r\n# ]\r\n```\r\n\r\n### Авторизованные запросы\r\n\r\nНо если есть необходимость вызывать какие-то методы, требующие авторизации пользователя, то придется получить токен доступа.\r\n\r\n#### Авторизация\r\n\r\nСхема получения токена доступа следующая:\r\n\r\n* редиректим пользователя на ВКонтакте, там он подтверждает запрошенные права доступа\r\n* ВК редиректит его обратно в наше приложение, передавая в параметрах код\r\n* запрашиваем у ВК токен доступа, используя код, полученный шагом ранее\r\n* с токеном можно вызывать методы ВКонтакте API\r\n\r\nПервое, что нужно сделать - зарегистрировать приложение на vk.com. Идем [сюда](http://vk.com/editapp?act=create), вводим название приложения, его домен и тип. После создания на странице редактирования приложения можно найти ID приложения и защищенный ключ.\r\n\r\nДалее перебрасываем пользователя на ВК для получения прав на доступ к его данным. URL для редиректа составляется по следующей схеме:\r\n\r\n```\r\nhttp://oauth.vk.com/authorize? \r\n client_id=APP_ID& \r\n scope=SETTINGS& \r\n redirect_uri=REDIRECT_URI& \r\n response_type=code\r\n```\r\n\r\nгде `APP_ID` - ID приложения, `SETTINGS` - права доступа, которые мы хотим получить (полный список возможных прав можно почитать [здесь](http://vk.com/developers.php?oid=-17680044&p=Application_Access_Rights)), а `REDIRECT_URI` - урл приложения, куда пользователь будет переброшен после подтверждения прав доступа.\r\n\r\nПри редиректе пользователя обратно в приложение будет передан параметр `code`:\r\n\r\n```\r\nhttp://REDIRECT_URI?code=7a6fa4dff77a228eeda56603b8f53806c883f011c40b72630bb50df056f6479e52a\r\n```\r\n\r\nТеперь, когда у нас есть код, можно получить токен доступа. Выполняем второй запрос на следующий URL:\r\n\r\n```\r\nhttps://oauth.vk.com/access_token? \r\nclient_id=APP_ID& \r\nclient_secret=APP_SECRET& \r\ncode=7a6fa4dff77a228eeda56603b8f53806c883f011c40b72630bb50df056f6479e52a\r\n```\r\n\r\nТут мы используем ID приложения (`APP_ID`) и защищенный ключ (`APP_SECRET`) из настроек приложения, а также код из предыдущего шага. Ответ придет в формате JSON:\r\n\r\n```\r\n{\"access_token\":\"533bacf01e11f55b536a565b57531ac114461ae8736d6506a3\", \"expires_in\":43200, \"user_id\":6492}\r\n```\r\n\r\nНа этом авторизация завершена, и можно пользоваться API.\r\n\r\n#### Использование API\r\n\r\n``` ruby\r\n# создаем клиент API, ассоциированный с токеном доступа\r\n@app = VkontakteApi::Client.new('533bacf01e11f55b536a565b57531ac114461ae8736d6506a3')\r\n\r\n# и выполняем запросы\r\n@app.groups.get # => [1, 31022447]\r\n@app.friends.get(fields: ['uid', 'first_name', 'last_name'])\r\n# =>  [\r\n#       {\r\n#         :uid          => \"1\",\r\n#         :first_name   => \"Павел\",\r\n#         :last_name    => \"Дуров\"\r\n#       },\r\n#       {\r\n#         :uid          => \"6492\",\r\n#         :first_name   => \"Andrew\",\r\n#         :last_name    => \"Rogozov\"\r\n#       }\r\n#     ]\r\n```\r\n\r\nБолее подробно о вызове методов можно почитать в [README](https://github.com/7even/vkontakte_api/blob/master/README.ru.md).","tagline":"Ruby-way wrapper for VKontakte API","google":"UA-31422612-1","note":"Don't delete this file! It's used internally to help with page regeneration."}